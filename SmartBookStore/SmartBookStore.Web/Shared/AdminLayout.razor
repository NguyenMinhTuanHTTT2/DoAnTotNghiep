@using SmartBookStore.Web.Service
@inject NavigationManager Nav
@inject AuthService Auth
@inherits LayoutComponentBase
@implements IDisposable

@* <link href="css/AdminLayout.css" rel="stylesheet" />
 *@
<link href="css/QuanLyNguoiDung.css" rel="stylesheet" />
<link href="css/QuanLySach.css" rel="stylesheet" />
<div class="admin-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h3 class="logo">Quản trị</h3>
        <ul>
            <li @onclick="@(() => Nav.NavigateTo("/admin/dashboard"))">Dashboard</li>
            <li @onclick="@(() => Nav.NavigateTo("/admin/quanlysach"))">Quản trị Sản phẩm</li>
            <li @onclick="@(() => Nav.NavigateTo("/admin/quanlydonhang"))">Quản trị Đơn hàng</li>
            <li @onclick="@(() => Nav.NavigateTo("/admin/quanlynguoidung"))">Quản trị Người dùng</li>
            <li @onclick="@(() => Nav.NavigateTo("/admin/thongke"))">Thống kê</li>
        </ul>
    </aside>

    <!-- Content -->
    <div class="admin-content">
        <!-- Header -->
        <header class="admin-header">
            <span class="title">Trang quản trị</span>

            <div class="header-right">
                <div class="admin-info">
                    <span>@Auth.GetCurrent()?.HoTen</span>
                    <button class="btn-logout" @onclick="DangXuat">Đăng xuất</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            @Body
        </main>
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        Auth.OnChange += HandleAuthChanged;
    }

    private void HandleAuthChanged() => InvokeAsync(StateHasChanged);

    private async Task DangXuat()
    {
        await Auth.DangXuat();
        Nav.NavigateTo("/dangnhap", forceLoad: true);
    }

    public void Dispose()
    {
        Auth.OnChange -= HandleAuthChanged;
    }
}
<style>
    .admin-layout {
        display: grid;
        grid-template-columns: 240px 1fr; /* Sidebar | Main content */
        grid-template-rows: 60px 1fr; /* Header | Content */
        grid-template-areas:
            "sidebar header"
            "sidebar main";
        height: 100vh;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* --- Sidebar --- */
    .sidebar {
        grid-area: sidebar;
        background-color: #1e1e2f; /* màu tối */
        color: #ffffff;
        display: flex;
        flex-direction: column;
        padding: 20px;
    }

        .sidebar .logo {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
            color: #4CAF50; /* màu xanh nhấn */
        }

        .sidebar li {
            list-style: none;
            color: #cfcfcf;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

            .sidebar li:hover {
                background-color: #2c2c44;
                color: #ffffff;
            }

    /* --- Header --- */
    .admin-header {
        grid-area: header;
        background-color: #ffffff;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
    }

        .admin-header .title {
            font-weight: 600;
            font-size: 18px;
            color: #333;
        }

        .admin-header .header-right {
            display: flex;
            align-items: center;
        }

        .admin-header .admin-info {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            color: #333;
        }

    /* --- Nút đăng xuất --- */
    .btn-logout {
        background: linear-gradient(135deg, #ff6b6b, #e74c3c);
        color: #fff;
        border: none;
        padding: 6px 14px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
    }

        .btn-logout:hover {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            transform: translateY(-1px);
        }

    /* --- Nội dung chính --- */
    main {
        grid-area: main;
        background-color: #f9f9f9;
        padding: 20px;
       
    }
</style>